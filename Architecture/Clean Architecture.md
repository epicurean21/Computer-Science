# Clean Architecture

### 계층형 아키텍처의 문제는 무엇일까?

![layerArchitecture](./img/layerArchitecture.png)

우선 계층 (layer) 아키택처란 무엇인가. <u>웹 계층, 도메인 계층, 영속성 계층으로 구성된 전통적인 웹 애플리케이션 구조이다.</u>

- 웹 계층에서 요층을 받아 도메인 또는 비즈니스 계층의 서비스로 요청을 보낸다.
- 서비스에서는 비즈니스 로직을 수행하고, 영속성 계층의 컴포넌트를 호출한다.
- <u>특정한 계층에서는 **같은 계층에** 있는 컴포넌트나 **하위에 있는 계층에만 접근이** 가능하다.</u>
  - 요청은 외부에서 request가 web layer [controller]로 들어오면, 서비스로 business logic 처리를 위임한다. 서비스 레이어에서는 데이터 처리를 위한 영속성 레이어를 호출한다.
- 하지만 이러한 계층형 아키텍처에는 유지보수에 실패하는 함정들이 다수 있다.



### 계층형 아키텍처의 함정

> 계층형 아키텍처는 데이터베이스 주도 설계를 유도한다.

- 애플리케이션의 use case 작성시에, 도메인 로직보다 영속성 계층을 먼저 구현하고 이를 토대로 도메린 로직을 구현한다.
  - 이는, 의존성의 방향에 맞게 구현한 것이다.
- ORM (객체 관계 매핑) 프레임워크를 사용하는 경우, 비즈니스 규칙을 영속성 관점과 섞고 싶은 유혹을 쉽게 받는다.
- 비즈니스 관점에서는 도메인 로직이 애플리케이션의 핵심이지만, 개발자 입장으로서 도메인 로직이 아닌, 데이터베이스를 우선적으로 신경쓰게된다.

- 도메인 계층과, 데이터베이스간의 강결합이 발생할 가능성이 농후하다.



> 지름길을 택하기 쉬워진다.



